{% extends "base.html" %}
{% load django_bootstrap5 %}
{% bootstrap_messages %}
{% load i18n %}

{% block content %}
<div class="container px-3 px-sm-0">
    <div class="wrapper flex-grow-1">
        <h1 class="my-4 text-start">{% trans "Task view" %}</h1>

        <div class="card">
            <div class="card-header bg-secondary text-white">
              <h2 class="h4 h3-md">{{ object.name }}</h2>
            </div>
            <div class="card-body bg-light">
              <p class="mb-3">{{ object.description|linebreaksbr }}</p>
              <hr>
              <div class="container-fluid">
                <div class="row mb-2">
                  <div class="col-4 col-md-3 text-muted small text-truncate">
                    <strong>{% trans "Author" %}:</strong>
                  </div>
                  <div class="col-8 col-md-9">
                    {{ object.author.username }}
                  </div>
                </div>
                <div class="row mb-2">
                  <div class="col-4 col-md-3 text-muted small text-truncate">
                    <strong>{% trans "Executor" %}:</strong>
                  </div>
                  <div class="col-8 col-md-9">
                    {{ object.executor.username }}
                  </div>
                </div>
                <div class="row mb-2">
                  <div class="col-4 col-md-3 text-muted small text-truncate">
                    <strong>{% trans "Status" %}:</strong>
                  </div>
                  <div class="col-8 col-md-9">
                    <span class="badge bg-secondary">{{ object.status }}</span>
                  </div>
                </div>
                <div class="row mb-2">
                  <div class="col-4 col-md-3 text-muted small text-truncate">
                    <strong>{% trans "Created at" %}:</strong>
                  </div>
                  <div class="col-8 col-md-9">
                    {{ object.created_at }}
                  </div>
                </div>

                <div class="row mb-3">
                  <div class="col-4 col-md-3 text-muted small text-truncate">
                    <strong>{% trans "Labels" %}:</strong>
                  </div>
                  <div class="col-8 col-md-9">
                    {% if object.labels.all %}
                      <div class="d-flex flex-wrap gap-1">
                        {% for label in object.labels.all %}
                        <span class="badge bg-primary text-truncate" style="max-width: 120px;" title="{{ label.name }}">
                          {{ label.name }}
                        </span>
                        {% endfor %}
                      </div>
                    {% else %}
                      <p class="text-muted small mb-0">{% trans "No labels" %}</p>
                    {% endif %}
                  </div>
                </div>

                <div class="row mt-4">
                  <div class="col-12">
                    <div class="d-flex flex-row gap-2 justify-content-start">
                      <a class="btn btn-outline-primary" href="{% url 'tasks:task-update' task.id %}">{% trans "Edit" %}</a>
                      <a class="btn btn-outline-danger" href="{% url 'tasks:task-delete' task.id %}">{% trans "Delete" %}</a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
    </div>
</div>
{% endblock %}